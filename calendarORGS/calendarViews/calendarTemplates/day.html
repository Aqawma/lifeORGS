<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <title>Calendar Grid</title>
  <style>
    :root { --dayH: 2000px; }               /* phone default */

    @media (min-width: 600px)  {            /* small tablets / landscape phone */
    :root { --dayH: 2200px; }
    }
    @media (min-width: 1024px) {            /* laptop / desktop */
    :root { --dayH: 2400px; }
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f9f9f9;
        /* Grid background - hourly lines */
        background-image:
          linear-gradient(to bottom, rgba(0,0,0,0.15) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
        background-size:
          100% calc(var(--dayH) / 24),  /* Major grid lines every hour (24 hours = 4.16vh each) */
          100% calc(var(--dayH) / 24); /* Minor grid lines every 30 minutes */
        background-position: 0 0, 0 calc(var(--dayH) / 48);
        min-height: var(--dayH);
        overflow-x: hidden;
    }

    .container {
        display: grid;
        grid-template-columns: 5vw auto;
        column-gap: 10px;   /* horizontal only */
        row-gap: 0;         /* remove vertical gap */
        min-width: calc(var(--dayH) / 9);
        width: 100%;
    }

    .time-column {
        height: calc(var(--dayH) / 24);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: max(2vw, 11px);
        white-space: nowrap;
        padding-left: 25px;
    }

    .box {
      width: 90%;
      background-color: rgba(173, 216, 230, 0.9);
      border-radius: 10px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 10px;
      box-sizing: border-box;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        min-height: 0;        /* â†“ vertical */
        min-width: 0;
    }

    {% for idx in range(todayEvents|length) %}
      .box:nth-child({{ (idx * 2) + 1 }}) {
          background-color: transparent;
          margin: 0;
          padding: 0;
          border: none;
          box-shadow: none;
          height: calc({{ todayEvents[idx]["toPreviousEvent"] }} * var(--dayH) / 86400);

      }
      .box:nth-child({{ (idx * 2) + 2 }}) {
        background-color: {{ colorDict[eventColors[idx]] }};
        height: calc({{ todayEvents[idx]["eventData"].percentOfDay }} * var(--dayH) / 100);
      }
    {% endfor %}
  </style>
</head>
<body>
    <div class="container">
    <div>
        <div class="time-column">12:00</div>
        <div class="time-column">1:00</div>
        <div class="time-column">2:00</div>
        <div class="time-column">3:00</div>
        <div class="time-column">4:00</div>
        <div class="time-column">5:00</div>
        <div class="time-column">6:00</div>
        <div class="time-column">7:00</div>
        <div class="time-column">8:00</div>
        <div class="time-column">9:00</div>
        <div class="time-column">10:00</div>
        <div class="time-column">11:00</div>
        <div class="time-column">12:00</div>
        <div class="time-column">1:00</div>
        <div class="time-column">2:00</div>
        <div class="time-column">3:00</div>
        <div class="time-column">4:00</div>
        <div class="time-column">5:00</div>
        <div class="time-column">6:00</div>
        <div class="time-column">7:00</div>
        <div class="time-column">8:00</div>
        <div class="time-column">9:00</div>
        <div class="time-column">10:00</div>
        <div class="time-column">11:00</div>
    </div>
    <div>
        {% for event in todayEvents %}
            <div class="box"></div>
            <div class="box">{{ event["eventData"].iD }}</div>
        {% endfor %}
    </div>
    </div>
</body>
</html>